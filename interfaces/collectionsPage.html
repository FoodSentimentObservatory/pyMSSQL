<!DOCTYPE html>
<html>

	<head>
		<link href="/static/css/bootstrap.css"  rel="stylesheet" type="text/css"/>
		<link   href="/static/css/styles.css" rel="stylesheet" type="text/css"/>
		<link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.1.3/css/bootstrap-datetimepicker.min.css'>
		<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>
    <link href="/static/css/checkboxStyles.css"  rel="stylesheet" type="text/css"/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

	</head>

	<body>

	    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Food Sentiment Observatory</a>
        </div>
        <ul class="nav navbar-nav">
          <li><a href="/index">Home</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Searches
            <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="#">List of</a></li>
              <li><a href="#">Searches</a></li>
              <li><a href="#">For that sprint</a></li>
            </ul>
          </li>
          <li><a href="#">Manual</a></li>
          <li class="active"> <a href="/collectionsPage">Collections</a></li>
        </ul>
      </div>
    </nav> 

		<div class="container" >
			<div id="mainContainer" class="tableMain">
      <div id="checkBoxAlert"></div>  
      <h3>Collections</h3>
      
        <div class="table-responsive">
          <table id="mytable" class="table table-bordred table-striped">
           <thead>          
             <th> </th>
             <th>Name</th>
             <th>Description</th>
             <th>Created at</th>
             <th>Last updated</th>
             <th>Show tweets</th>
             <th>Edit</th>
             <th>Delete</th>
          </thead>
          <tbody>  
          {% for collection in collectionsList %}
          <tr>
            <td>
     
                  <input type="checkbox" class="checkthis styled" name="collectionRow" value = "{{collection[2]}}"/>
       
            </td>
            <td>{{collection[3]}}</td>
            <td>{{collection[1]}}</td>
            <td>{{collection[4]}}</td>
            <td>{{collection[5]}}</td>
             <td>
              <form name="showTweetsForm" action="/showCollection">
              <input type="hidden" name="collectionToShowId" id="collectionToShowId" value="{{collection[2]}}">
              <button class="btn btn-success btn-xs" type="submit" >
                <span class="glyphicon glyphicon-floppy-open"></span>
              </button>
              </form>
            </td>
            {% for param in paramsList %}
              {% if param[0] == collection[0] %}
            <td>
              <button class="btn btn-primary btn-xs"  data-toggle="modal" data-target="#edit" onclick="setCollectionDateForEdit('{{collection[3]}}','{{collection[1]}}','{{collection[2]}}','{{collection[0]}}','{{param[1]}}');">
                <span class="glyphicon glyphicon-pencil"></span>
              </button>
            </td>
             {% endif %}
            {% endfor %}  
            <td>
              <button class="btn btn-danger btn-xs"  data-toggle="modal" data-target="#delete" onclick="setCollectionId('{{collection[2]}}')">
                <span class="glyphicon glyphicon-trash"></span>
              </button>
            </td>
          </tr>  
          {% endfor %}
          </tbody>
        </table>
      </div> 
    <form name="formToVisualise" action="/visualiseCollections">
      <input type="hidden" name="twoCollectionId" id="twoCollectionId" value="">  
      <button class="btn btn-success" type="submit" id="visButton" disabled>Visualise</button>
    </form>

  </div>
</div>

<!--Modal to edit -->
    <div class="modal fade" id="edit" role="dialog" >
      <div class="modal-dialog">
    <div class="modal-content">
          <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" ><span class="glyphicon glyphicon-remove" ></span></button>
        <h4 class="modal-title custom_align" id="Heading">Edit Collection Details</h4>
      </div>
          <div class="modal-body">
          <form  name="editForm" action="/updateCollection">
          <input type="hidden" name="collectionId" id="collectionId" value="">
          <input type="hidden" name="timeStamp" id="timeStamp" value="">

          <div class="form-group">
          <label for="nameOfProject">Name of the collection</label>
        <input class="form-control" name="nameOfProject" id="nameOfProject" type="text" value="">
        </div>
        <div class="form-group">
        <label for="descriptionOfProject">Description</label>
        <textarea rows="2" class="form-control" name="descriptionOfProject" id="descriptionOfProject" value=""></textarea>   
        </div>
        <p><strong>Tick any keyword groups you would like to remove from the collection.</strong></p>
        <div class="form-group" id="checkBoxArea"></div>
      </div>
          <div class="modal-footer ">
        <button type="submit" class="btn btn-warning btn-lg" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign"></span> Update</button>
        </form>
      </div>
        </div>
    <!-- /.modal-content --> 
  </div>
      <!-- /.modal-dialog --> 
    </div>

<!--Modal to delete -->
   <div class="modal fade" id="delete"  role="dialog" >
      <div class="modal-dialog">
    <div class="modal-content">
          <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
        <h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
      </div>
          <div class="modal-body">
       
       <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this Record?</div>
       
      </div>
        <div class="modal-footer ">
        <form name="deleteForm" action="/deleteCollection">
          <input type="hidden" name="collectionToDeleteId" id="collectionToDeleteId" value="">
          <button type="submit" class="btn btn-success" ><span class="glyphicon glyphicon-ok-sign"></span> Yes</button>
          <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> No</button>
        </form>
        
        
      </div>
        </div>
    <!-- /.modal-content --> 
  </div>
      <!-- /.modal-dialog --> 
    </div>

  <script src='/static/js/bootstrap.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.1.3/js/bootstrap-datetimepicker.min.js'></script>
    <script src = "/static/js/scripts.js"></script>  

</body>
  
</html>      